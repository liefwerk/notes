<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Maping Dispatch To Props</title>
</head><body><b>Maping States to Props</b><br/>
<br/>
We might want to map states to props when we want to interact/delete the props.<br/>
Here's a recap of what happends when we want to make a change to a prop:<br/>
<br/>
1- To make a change, we have to dispatch an action from the component.<br/>
That action will contain a type and an optional payload.<br/>
In the case of deleting a post, could be the id of the post.<br/>
<br/>
2- Then, that action is dispatched to the reducer. Checks the type, takes the payload and make the change to the central store.<br/>
<br/>
3- Then we get the updated props inside the component.<br/>
<br/>
<b>Creating the mapDispatchToProps function<br/>
</b><br/>
<span style="color: #007f7f"><tt>// the function takes the dispatch as a parameter</tt></span><br/>
<tt><span style="color: #00007f">const mapDispatchToProps = (dispatch) =&gt; {</span><ul><span style="color: #00007f"><li style="list-style-type: none">return {</li>
</span><li style="list-style-type: none"><ul><span style="color: #007f7f"><li style="list-style-type: none">// inside the function we return the delePost function (which takes an id as a parameter)</li>
</span><li style="list-style-type: none"><span style="color: #007f7f">// and we call the dispatch function which takes an object with a type and an id</span></li>
<span style="color: #00007f"><li style="list-style-type: none">deletePost: (id) =&gt; { dispatch({type: 'DELETE_POST', id: id}) }</li>
</span></ul>
</li>
<span style="color: #00007f"><li style="list-style-type: none">}</li>
</span></ul>
<span style="color: #00007f">}<br/>
<br/>
</span></tt>We then pass the <span style="color: #00007f"><tt>mapDispatchToProps()</tt></span>&nbsp;function inside the <tt><span style="color: #00007f">connect()</span></tt>&nbsp;function<br/>
<br/>
<span style="color: #00007f"><tt>export default connect(mapStateToProps, mapDispatchToProps)(Post)<br/>
<br/>
</tt></span>Inside the JSX we create a button that will fire the deletePost function<br/>
<br/>
<span style="color: #00007f"><tt>&lt;div className="center"&gt;<ul><li style="list-style-type: none">&lt;button className="btn grey" onClick={this.handleClick}&gt;Delete Post&lt;/button&gt;</li>
</ul>
&lt;/div&gt;<br/>
<br/>
</tt></span>Then we create athat handleClick() function<br/>
<br/>
<span style="color: #00007f"><tt>handleClick = () =&gt; {<ul><li style="list-style-type: none">this.props.deletePost(this.props.post.id)</li>
</ul>
}<br/>
<br/>
</tt></span>We then go to the rootReducer.js file that will handle the next steps.<br/>
<br/>
<tt><span style="color: #00007f">const rootReducer = (state = initState, action) =&gt; {<br/>
&nbsp; </span><ul><li style="list-style-type: none"><span style="color: #007f7f">// check the type of action</span><span style="color: #00007f"></span></li>
<span style="color: #00007f"><li style="list-style-type: none">if (action.type === 'DELETE_POST'){</li>
</span><li style="list-style-type: none"><ul><li style="list-style-type: none"><span style="color: #007f7f">// we'll &nbsp;use the filter method </span><span style="color: #00007f"></span></li>
<span style="color: #00007f"><li style="list-style-type: none">let newPosts = state.posts.filter(post =&gt; {</li>
</span><li style="list-style-type: none"><ul><li style="list-style-type: none"><span style="color: #007f7f">// when the action.id is not post.id it will return true, when it is equal it will return false and filter it.</span><span style="color: #00007f"></span></li>
<span style="color: #00007f"><li style="list-style-type: none">return action.id !== post.id</li>
</span></ul>
</li>
<span style="color: #00007f"><li style="list-style-type: none">})</li>
</span><li style="list-style-type: none"><span style="color: #007f7f">// and we return the new state</span><span style="color: #00007f"></span></li>
<span style="color: #00007f"><li style="list-style-type: none">return {</li>
</span><li style="list-style-type: none"><span style="color: #007f7f">// let's not forget to add the other props of the state with the spread operator</span><span style="color: #00007f"></span></li>
<span style="color: #00007f"><li style="list-style-type: none"><ul><li style="list-style-type: none">...state,</li>
<li style="list-style-type: none">posts: newPosts</li>
</ul>
</li>
<li style="list-style-type: none">}</li>
</span></ul>
</li>
<span style="color: #00007f"><li style="list-style-type: none">}</li>
<li style="list-style-type: none">&nbsp; </li>
<li style="list-style-type: none">return state;</li>
</span></ul>
<span style="color: #00007f"><br/>
}<br/>
<br/>
</span></tt></body></html>