<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Logging Users In</title>
</head><body><b>Logging Users In</b><br/>
<br/>
Firstly, to handle the action we have to create an action creator with the file authActions.js<br/>
<br/>
<span style="color: #00007f"><tt>import firebase from 'firebase/app'<br/>
</tt></span><span style="color: #00007f"><tt>import 'firebase/auth';</tt></span><br/>
<br/>
<tt><span style="color: #00007f">export const signIn = (credentials) =&gt; {<ul><li style="list-style-type: none">return (dispatch, getState) =&gt; {</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">const firebase = getFirebase();</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none">firebase.auth().signInWithEmailAndPassword(</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">credentials.email,</li>
<li style="list-style-type: none">credentials.password</li>
</ul>
</li>
<li style="list-style-type: none">).then(() =&gt; {</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">dispatch({type: 'LOGIN_SUCCESS'})</li>
</ul>
</li>
<li style="list-style-type: none">}).catch((err) =&gt; {</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">dispatch({type: 'LOGIN_ERROR', err})</li>
</ul>
</li>
<li style="list-style-type: none">})</li>
</ul>
</li>
<li style="list-style-type: none">}</li>
</ul>
</span></tt><tt><span style="color: #00007f">}</span></tt><br/>
<br/>
Then, once that action is dispatched it will reach our authReducer.js file, we have to handle these few cases<br/>
<br/>
<tt><span style="color: #00007f">const authReducer = (state = initState, action) =&gt; {<ul><li style="list-style-type: none">switch(action.type){</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">case 'LOGIN_ERROR':</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">console.log('login error');</li>
<li style="list-style-type: none">return {</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">...state,</li>
<li style="list-style-type: none">authError: 'Login failed'</li>
</ul>
</li>
</ul>
</li>
<li style="list-style-type: none">}</li>
<li style="list-style-type: none">case 'LOGIN_SUCCESS':</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">console.log('login success');</li>
<li style="list-style-type: none">return {</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">...state,</li>
<li style="list-style-type: none">authError: null</li>
</ul>
</li>
</ul>
</li>
<li style="list-style-type: none">}</li>
<li style="list-style-type: none">default:</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">return state;</li>
</ul>
</li>
</ul>
</li>
<li style="list-style-type: none">}</li>
</ul>
}<br/>
<br/>
</span></tt>The reducer updates the state, now it is time to map the state to the props of the SignIn Component<br/>
<br/>
<span style="color: #00007f"><tt>const mapStateToProps = (state) =&gt; {<ul><li style="list-style-type: none">return {</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">authError: state.auth.authError</li>
</ul>
</li>
<li style="list-style-type: none">}</li>
</ul>
</tt></span><span style="color: #00007f"><tt>}</tt></span><br/>
<br/>
Let's not forget to pass it as an HOC<br/>
<br/>
<span style="color: #00007f"><tt>export default connect(mapStateToProps, mapDispatchToProps)(SignIn)</tt></span><br/>
<br/>
We can optionally pass that error inside the JSX and output it in the HTML login page<br/>
<br/>
<span style="color: #00007f"><tt>&lt;div className="red-text center"&gt;<ul><li style="list-style-type: none">{ authError ? &lt;p&gt;{authError}&lt;/p&gt; : null}</li>
</ul>
</tt></span><span style="color: #00007f"><tt>&lt;/div&gt;</tt></span><br/>
</body></html>